import{_ as c,a as u,o as l,c as d,b as n,e as m,i as p,j as h,t as f,h as y}from"./index-423b4fec.js";const q={name:"QuestionEditor",props:{slug:{type:String,required:!1}},data(){return{questionBody:null,error:null}},methods:{async performNetworkRequest(){let s="/api/v1/questions/",e="POST";this.slug!==void 0&&this.slug!==""&&(s=`/api/v1/questions/${this.slug}/`,e="PUT");try{const o=await u({method:e,url:s,data:{content:this.questionBody}});this.$router.push({name:"question",params:{slug:o.data.slug}})}catch(o){this.error=o.response.statusText}},onSubmit(){this.questionBody?this.questionBody.length>240?this.error="This field has no more than 240 characters":this.performNetworkRequest():this.error="Can't post an empty question"}},created(){document.title="Editor - QuestionTime"},async beforeRouteEnter(s,e,o){if(s.params.slug!==void 0&&s.params.slug!==""){const a=`/api/v1/questions/${s.params.slug}/`;try{const t=await u.get(a);return o(r=>r.questionBody=t.data.content)}catch(t){console.log(t)}}else return o()}},g={class:"container my-2"},_=n("h1",{class:"mb-3"},"Ask a question",-1),b=n("button",{type:"submit",class:"btn btn-success mt-3"},"Publish",-1),B={key:0,class:"muted mt-2"};function w(s,e,o,a,t,r){return l(),d("div",g,[_,n("form",{onSubmit:e[1]||(e[1]=h((...i)=>r.onSubmit&&r.onSubmit(...i),["prevent"]))},[m(n("textarea",{"onUpdate:modelValue":e[0]||(e[0]=i=>t.questionBody=i),class:"form-control",rows:"4",placeholder:"What do you want to ask?"},`

      `,512),[[p,t.questionBody]]),b],32),t.error?(l(),d("p",B,f(t.error),1)):y("",!0)])}const v=c(q,[["render",w]]);export{v as default};
